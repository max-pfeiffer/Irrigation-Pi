import{a as de,b as k}from"./chunk-JOKHTJMN.js";import{a as b,b as ce,e as ae}from"./chunk-5FZMLTAB.js";import{A as B,B as O,C as Q,D as N,Da as re,E as z,Ea as le,F as u,G as D,Ga as se,H as I,I as _,J as H,Ja as L,K as $,L as q,O as g,S as C,U as Y,e as f,ea as G,ga as y,j as v,l as j,la as J,m as A,ma as K,n as l,na as U,o as a,oa as W,p as S,pa as X,q as M,s as m,sa as Z,t as R,ta as ee,u as P,ua as te,v as s,va as ie,w as c,wa as ne,x as p,y as V,z as h,za as oe}from"./chunk-76XA6DQQ.js";import"./chunk-G6XIPE7G.js";import"./chunk-MTRQTMXR.js";import"./chunk-FEIAHVOV.js";import"./chunk-4SCXDPRD.js";import"./chunk-3YFEXPJZ.js";import"./chunk-IWEF5KMV.js";import"./chunk-4U6PRYVA.js";import"./chunk-ML2ZISXZ.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as T,b as E,d as x,e as i,f as F}from"./chunk-PG5KTQWO.js";var Se=r=>["/schedules/edit/",r],ue=(()=>{let n=class n{constructor(o,e,t,d,me){i(this,"scheduleService");i(this,"cdr");i(this,"alertController");i(this,"navController");i(this,"route");i(this,"schedule");i(this,"refreshList",new M);this.scheduleService=o,this.cdr=e,this.alertController=t,this.navController=d,this.route=me,b({trash:ae})}toggleActive(){let t=this.schedule,{id:o}=t,e=x(t,["id"]);e=E(T({},e),{active:!this.schedule.active}),this.scheduleService.updateSchedule(o,e).pipe(f(()=>{this.refreshList.emit()})).subscribe()}deleteSchedule(){return F(this,null,function*(){yield(yield this.alertController.create({header:"Are you sure?",message:"Do you really want to delete this schedule?",buttons:[{text:"Yes",role:"destructive",handler:()=>{this.scheduleService.deleteSchedule(this.schedule.id).pipe(f(()=>{this.refreshList.emit()})).subscribe()}},{text:"No",role:"cancel"}]})).present()})}};i(n,"\u0275fac",function(e){return new(e||n)(a(k),a(S),a(se),a(y),a(C))}),i(n,"\u0275cmp",v({type:n,selectors:[["app-schedule-tile"]],inputs:{schedule:"schedule"},outputs:{refreshList:"refreshList"},standalone:!0,features:[_],decls:18,vars:12,consts:[[3,"routerLink"],["slot","end","color","primary",3,"disabled"],["side","start"],[3,"color","click"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(e,t){e&1&&(s(0,"ion-item-sliding")(1,"ion-item",0)(2,"ion-label")(3,"h2"),u(4),$(5,"displayString"),c(),s(6,"p"),u(7),p(8,"br"),u(9),c()(),s(10,"ion-chip",1),u(11),c()(),s(12,"ion-item-options",2)(13,"ion-item-option",3),h("click",function(){return t.toggleActive()}),u(14),c()(),s(15,"ion-item-options",4)(16,"ion-item-option",5),h("click",function(){return t.deleteSchedule()}),p(17,"ion-icon",6),c()()()),e&2&&(l(),m("routerLink",H(10,Se,t.schedule.id)),l(3),D(q(5,8,t.schedule.repeat)),l(3),I(" At ",t.schedule.start_time," o'clock"),l(2),I(" For ",t.schedule.duration," minutes "),l(),m("disabled",!t.schedule.active),l(),D(t.schedule.active?"Active":"Inactive"),l(2),O("color",t.schedule.active?"danger":"success"),l(),I(" ",t.schedule.active?"Deactivate":"Activate"," "))},dependencies:[g,G,Y,de,te,ie,U,ee,Z,L],changeDetection:0}));let r=n;return r})();var Ie=["scheduleList"],_e=(r,n)=>n.id;function ge(r,n){if(r&1){let w=V();s(0,"app-schedule-tile",7),h("refreshList",function(){j(w);let e=B();return A(e.refreshList())}),c()}if(r&2){let w=n.$implicit;m("schedule",w)}}var He=(()=>{let n=class n{constructor(o,e,t,d){i(this,"schedulerService");i(this,"cdr");i(this,"navController");i(this,"route");i(this,"scheduleList");i(this,"schedules",[]);this.schedulerService=o,this.cdr=e,this.navController=t,this.route=d,b({addOutline:ce})}ionViewDidEnter(){this.refreshList()}refreshList(){this.schedulerService.getSchedules().pipe(f(()=>this.scheduleList.closeSlidingItems().catch(()=>{}))).subscribe({next:o=>{this.schedules=o,this.cdr.detectChanges()}})}addSchedule(){this.navController.navigateForward(["edit"],{relativeTo:this.route})}};i(n,"\u0275fac",function(e){return new(e||n)(a(k),a(S),a(y),a(C))}),i(n,"\u0275cmp",v({type:n,selectors:[["app-schedule-list"]],viewQuery:function(e,t){if(e&1&&Q(Ie,5),e&2){let d;N(d=z())&&(t.scheduleList=d.first)}},standalone:!0,features:[_],decls:14,vars:2,consts:[[3,"translucent"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","add-outline"],[3,"fullscreen"],["scheduleList",""],[3,"schedule","refreshList"],[3,"schedule"]],template:function(e,t){e&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),p(3,"ion-menu-button"),c(),s(4,"ion-title"),u(5,"Schedules"),c(),s(6,"ion-buttons",2)(7,"ion-button",3),h("click",function(){return t.addSchedule()}),p(8,"ion-icon",4),c()()()(),s(9,"ion-content",5)(10,"ion-list",null,6),R(12,ge,1,1,"app-schedule-tile",8,_e),c()()),e&2&&(m("translucent",!0),l(9),m("fullscreen",!0),l(3),P(t.schedules))},dependencies:[g,ue,X,le,K,oe,re,J,L,W,ne],changeDetection:0}));let r=n;return r})();export{He as ScheduleListPage};
